<h2> 프로젝트 상세 업무</h2>

- 웹/DB 클라우드 서버 세팅 및 운영
- 프로젝트 기획서 작성 
- 전반적인 팀 협업 프로세스 관리 : 노션 스페이스 제작
- ERD / API List 설계
- Spring Boot를 활용한 REST API 개발
   - 유저, 식당, 주문 관련 API 40여개 구현
   - 심화 API 구현
      - 네이버 SENS 문자 API 연동
      - 구글 소셜 로그인 기능 구현
      - 각종 필터링 기능 (위치, 신규 등록, 카테고리, 키워드) 구현 
- 서버 배포 후 API 테스트 및 명세서 작성
- 시연 동영상 제작

<h2>2022-03-19 </h2>

- 팀 빌딩 완료
- 프로젝트 기획서 작성 완료
    - 개발할 기능 결정/ 화면 캡쳐 후 필요한 기능 확인
    - 역할 분담 
    - 1주차 개발 범위 선정
- 스프링 프로젝트 설정/깃허브 업로드 완료
- EC2 서버 세팅 : Dev/Prod 서브도메인 적용 완료
  - SSL(https) 적용 완료 
  - 스프링 부트는 서버 성능 문제 때문에 빌드와 테스트를 로컬 환경에서, 클라이언트와는 prod 서버로만 협업할 예정.

<h2> 2022-03-20 </h2>

- yml 파일에서 local/prod 개발 환경 분리 
- ERD 작성
  - 뷰 보면서 필요한 테이블, 컬럼 추출
  - 스프레드시트 확인하면서 DB 설계
- ERD를 토대로 RDS 데이터베이스에 새로운 스키마 생성
- DB에 더미데이터 집어넣는 작업 완료

<h2> 2022-03-21</h2>

- API list 작성
- 클라이언트 파트와 API list 컨펌
- 팀 협업용 노션 워크스페이스 제작
  
- 회원가입 API 개발 완료
  - API 명세서 작성 완료
  - prod server 연동 완료
- 로그인 API 개발 완료
  - 회원 인가 프로세스 Request Interceptor로 개발 후 테스트 완료
    - 회원 인가가 필요없는 API는 @NoAuth 어노테이션 추가.
  - prod server 연동 완료
    - 프록시 패스 추가하여 prod 포트 노출 X
    - java -jar -Dspring.profiles.active=prod *.jar
  
<h2>2022-03-22</h2>

- ControllerAdvice 추가
  - 자주 발생하는 예외는 ExceptionHandler 추가하여 예외처리 하도록 함.
  
- 회원 조회 관련 api 개발/테스트 완료
  - 전체 회원 조회
  - 이메일로 조회
  - 회원 번호로 조회
  
- 회원 정보(이름) 수정 api 개발/테스트 완료
- 관련 API 명세서 작성 완료


<h2>2022-03-23</h2>

- 1차 피드백 완료
- 주문번호로 상세 주문내역 조회 API 작성 완료
  - postman 테스트 완료
  - 쿼리/코드가 복잡해 재활용을 위한 메소드로 분리하는 방식으로 리팩토링
  
- 카테고리로 식당 조회 API 개발/테스트 완료
  - JSON 출력 결과 확인 후 코드 리팩토링
  - 식당 정보 + 단순 메뉴 리스트 -> 카테고리별로 분류한 메뉴 리스트 출력하도록 리팩토링
  - 중복 코드/쿼리 리팩토링
  
  
<h2>2022-03-24</h2>

- 쿠팡이츠 앱의 특성을 고려해 유저의 위치와 가까운 식당을 조회해야 할 필요성이 있음.
  - utils에 두 위치좌표(위경도) 간의 거리를 계산하는 distance 함수 추가
  - 식당 인덱스로 조회 이전에 위치부터 측정해 유저 위치 반경 10km 밖에 있으면 리스트에서 제거하는 부분 추가함.
  - 추후 식당 조회 API에서는 request시에 무조건 유저 위치 인덱스를 파라미터로 함께 추가해서 보내도록 할 예정.
  
- login api 수정 
  - redirect uri 추가
  
- 가까운 상점 조회 API 개발 완료
- 상점 단독 조회 API 개발 완료

- 상점 조회 response에 (배달)최소-최대 배달시간+ (픽업)최소-최대 준비시간 계산해서 데이터 추가
  - 유저와 식당 간에 거리가 계산되었으니 최소-최대 준비시간 + 배달 시간으로 계산하면 OK


<h2>2022-03-25</h2>

- 상점을 키워드로 조회하는 API 개발
  - 검색 기능으로, 상점 이름 & 메뉴 이름을 위주로 검색하도록 함.

- 클라이언트 요청 사항 처리
  - 회원가입시 jwt 같이 전송하도록 수정 완료.
  
- 메뉴 세부 조회 API 개발
  - 메뉴와 옵션을 같이 조회하도록 함
 
 
- 가게의 리뷰를 조회하는 API 개발
  - Response를 좀더 상세하게 보내줄 필요가 있다고 생각해서, 필요하다고 생각하는 데이터는 최대한 포함하도록 함.
  - Service-Dao가 소통하는 Entity/Controller단에서의 DTO를 분리하도록 노력하자.
  - DB 조회시 inner join 때문에 발생하는 결과의 중복(Cartesian Product)을 피해야 객체에 제대로 매핑됨.
      - 멤버변수중 List를 먼저 jdbcTemplate.query로 조회한다음, 나머지 변수들을 queryForObject로 조회하도록 함.

<h2>2022-03-26</h2>

- 상점 추가 API 개발 완료
  - insert 과정이 길고 복잡해서 여러 개의 쿼리를 처리하는 도중 오류가 발생하면, 같은 요청을 보냈을 때 데이터의 중복이 발생할 수 있다.
    - @Transactional 어노테이션을 추가해 트랜잭션 처리를 하도록 함.
    - insert/update/delete등 실제로 데이터에 영향을 주는 쿼리를 처리하는 도중에 에러가 발생하면 자동으로 rollback함
  
- 메뉴/ 옵션/ 메뉴 카테고리 추가 API 개발 완료

- DB 구조 수정
  - 메뉴에서 메뉴 카테고리 index를 분리하여 메뉴-메뉴_카테고리 관계 테이블 새로 생성함.
  

<h2>2022-03-27</h2>

- 상점/메뉴,옵션 추가 관련 API Test 완료

- 상점 정보 수정 관련 API 개발 완료
  - PATCH에서 일부 데이터에 대해서만 수정 요청을 할 수 있다.
    - update, insert 쿼리는 컬럼에 null값이 들어갈 경우 오류가 발생할 수 있다.
    - 수정이 필요없어 요청하지 않은 데이터들의 Null 체크를 잘 하도록 한다.
  - 차후에 MyBatis등의 고급 DB 기술을 사용하면 동적 쿼리를 사용할 수 있다.
    - 쿼리의 중복 없이 null인 데이터들은 동적으로 쿼리에서 제거할 수 있다.
  

<h2>2022-03-28</h2>

- 메뉴/옵션 수정 관련 API 개발/테스트 완료

- 주문 조회 API 수정
  - 주문 총액까지 계산하여 Response에 추가하도록 함.
- 주문 전송 API 개발 완료
  - 민감한 정보를 전송하는 과정이므로 트랜잭션 처리 하도록 함.


- 현재까지 개발한 API 모두 Prod(https://prod.asherchiv.shop) 환경에서 테스트 진행 
  - Postman에서 테스트 완료
  - API Collection 구조 수정 및 API 네이밍 추가 완료
  

- 클라이언트 요청 사항 처리
  - 식당 정보 조회 API Response에 리뷰 개수, 리뷰 평균 점수 계산해서 추가 완료
  - Store DB에 포장가능 여부 = store_pickup_status, 치타배달 가능 여부 = store_cheetah_delivery 컬럼 추가
  

- 패키지 구조 리팩토링 
 - Model에 Entity/Response/Request 패키지를 추가해 복잡한 클래스 구조를 리팩토링했다.


<h2>2022-03-29</h2>

- 리뷰 전송/조회/수정/삭제 API 개발 완료
- 유저의 주문내역 전체 조회/ 주문 번호로 조회 API 개발 완료
  

- DB 구조 수정
  - 주문내역에 review 여부 추가
  - 리뷰 전송시 review status 변경하도록 수정
- Store, Order 관련 API 명세서 작성 완료


- 유저 즐겨찾기 관련 API 개발/테스트 완료
  - 유저 즐겨찾기 조회
  - 유저 즐겨찾기 등록
  - 유저 즐겨찾기 삭제
  
- StoreDao 중복되는 코드 리팩토링 
  - 거리 필터링 여부를 측정하는 상태값을 파라미터로 넣어서 존재할 시 필터링 O, 없으면 필터링 X

<h2>2022-03-30</h2>

- 구글 소셜로그인 API 개발/테스트 완료
  - 구글 소셜 로그인 창으로 redirect해주는 API
  - 구글 소셜 로그인 시도 이후에 일련의 과정 (accessToken 검증, 구글 DB에서 프로필 정보 추출, 내 DB와 대조..) 처리하는 callback API
  

- 사용자가 즐겨찾기 했는지 여부를 상점 조회시 response에 포함하도록 수정.


- 네이버 SENS 문자 API 연동/테스트 완료
  
  - request로 문자 내용과 유저 index를 전송시, DB에서 index를 토대로 전화번호를 조회함.
  - SENS API 가이드 (https://api.ncloud-docs.com/docs/ai-application-service-sens-pushv2)를 참고해
    HttpEntity에 Header(access-key, encrypted signature,..)와 body(수신번호, 내용..)를 
    구성하여 api로 RestTemplate을 이용한 POST request를 보냄.
  - 문자가 api를 통해 전송이 된 후에, 성공 시 status code 와 문자 전송 시각 등이 response로 옴.
  - api access key, secret key, 네이버에 등록된 발신번호 등은 yml에 등록하여 사용함.
  

- User 결제수단 관련 API(리스트 조회, 등록, 삭제) 개발 완료
- User 주소 관련 API(리스트 조회, 등록, 삭제) 개발 완료


<h2>2022-03-31</h2>

- 상점/메뉴/옵션 삭제 API 추가 구현

- 44개의 API 전체적으로 수정 및 Postman을 통한 테스트 진행
  - HTTP Method Mapping 수정
  - 코드 리팩토링 
  - 필요한 validation 값 추가
  - Response 변수 타입 변경 (전화번호가 int로 인식되면 앞에 0을 자동으로 제거해버리는 문제)
  
- API 명세서 모두 작성 완료
- 모든 테스트 및 시연 완료

